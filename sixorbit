#!/usr/bin/env php
<?php

/**
 * SixOrbit Console
 *
 * Command-line interface for the SO Backend Framework
 */

require_once __DIR__ . '/vendor/autoload.php';

use Core\Console\Kernel;

// Bootstrap the application
$app = require_once __DIR__ . '/bootstrap/app.php';

// Create console kernel
$kernel = new Kernel();

// Register commands
$kernel->registerCommands([
    \Core\Console\Commands\QueueWorkCommand::class,
    \Core\Console\Commands\CacheClearCommand::class,
    \Core\Console\Commands\CacheGcCommand::class,
    \Core\Console\Commands\ActivityPruneCommand::class,
    \Core\Console\Commands\SessionCleanupCommand::class,
    \Core\Console\Commands\NotificationCleanupCommand::class,
    // Generator commands
    \Core\Console\Commands\MakeControllerCommand::class,
    \Core\Console\Commands\MakeModelCommand::class,
    \Core\Console\Commands\MakeMiddlewareCommand::class,
    \Core\Console\Commands\MakeMailCommand::class,
    \Core\Console\Commands\MakeEventCommand::class,
    \Core\Console\Commands\MakeListenerCommand::class,
    \Core\Console\Commands\MakeProviderCommand::class,
    \Core\Console\Commands\MakeExceptionCommand::class,
    \Core\Console\Commands\MakeServiceCommand::class,
    \Core\Console\Commands\MakeRequestCommand::class,
    \Core\Console\Commands\MakeJobCommand::class,
    \Core\Console\Commands\MakeRepositoryCommand::class,
    // Migration commands
    \Core\Console\Commands\MakeMigrationCommand::class,
    \Core\Console\Commands\MigrateCommand::class,
    \Core\Console\Commands\MigrateRollbackCommand::class,
    \Core\Console\Commands\MigrateStatusCommand::class,
    // Seeder commands
    \Core\Console\Commands\MakeSeederCommand::class,
    \Core\Console\Commands\SeedCommand::class,
    // Route commands
    \Core\Console\Commands\RouteListCommand::class,
    \Core\Console\Commands\RouteCacheCommand::class,
    // Security commands
    \Core\Console\Commands\KeyGenerateCommand::class,
    \Core\Console\Commands\JwtSecretCommand::class,
    // Translation commands
    \Core\Console\Commands\MakeTranslationCommand::class,
    \Core\Console\Commands\TranslationsMissingCommand::class,
    \Core\Console\Commands\TranslationsSyncCommand::class,
    // View commands
    \Core\Console\Commands\ViewClearCommand::class,
    \Core\Console\Commands\ViewCacheCommand::class,
    \Core\Console\Commands\ViewStatusCommand::class,
    // Test command
    \Core\Console\Commands\TestCommand::class,
]);

// Execute command
$exitCode = $kernel->call($argv);

exit($exitCode);
